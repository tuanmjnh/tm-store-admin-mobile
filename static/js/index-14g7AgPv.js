import{d as Q,B as lt,r as _,y as F,c as d,a as e,b as s,w as i,e as t,i as S,F as b,D as ot,o as u,$ as a,f as I,g as st,t as r,s as M,E as at,v as O,C as nt,L as it,j as rt}from"./index-Bphj8G7B.js";import"./index-DpkDwrjV.js";import{S as ct}from"./index-Bvu67CYK.js";import{u as ut,_ as dt}from"./vueQrcodeReader.vue_vue_type_script_setup_true_lang-C3jthDKC.js";import{P as pt,T as vt,S as _t}from"./index-C4mMcr2U.js";import{d as gt}from"./index-DbHcLYuo.js";import{G as ht}from"./drive-gapi-JynX-JZN.js";import{D as Z}from"./index-COofbABC.js";import{B as mt}from"./index-CCkMhh6d.js";import{l as z}from"./lodash-BsJt2GTj.js";import{s as ft}from"./function-call-CNR6nuk-.js";const yt={class:"overscroll-none overflow-auto",style:{height:"calc(100vh - 175px)"}},wt={class:"mr-2 block overflow-hidden truncate w-52"},bt={class:"grid grid-flow-row"},xt={class:"text-sky-600"},kt={class:"text-green-700"},Ct=e("button",{type:"button",class:"van-button van-button--warning van-button--normal van-button--square h-full"},[e("div",{class:"van-button__content"},[e("i",{class:"van-badge__wrapper van-button__icon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 48 48"},[e("g",{fill:"none",stroke:"currentColor","stroke-width":"4"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 7h6l7 17h17.5L43 10m-22 2h12m-6-6v12m-9 6l-4 6h26"}),e("circle",{cx:"19",cy:"39",r:"3"}),e("circle",{cx:"35",cy:"39",r:"3"})])])])])],-1),Vt={key:0,class:"flex justify-center pt-5"},Dt={key:0,class:"inline-flex rounded-md shadow-sm",role:"group"},St=["onClick"],$t=e("hr",{class:"border-gray-300 dark:border-gray-100 mt-5"},null,-1),qt={class:"overscroll-none overflow-auto content2"},It={class:"pl-6 pr-6"},jt={key:0,class:"pt-5"},Bt={class:"pb-5"},Lt={class:"relative inline-flex items-center w-full py-2 text-sm font-medium"},Pt=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mr-1",width:"20",height:"20",viewBox:"0 0 48 48"},[e("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"4"},[e("path",{d:"M10 44h28a2 2 0 0 0 2-2V14H30V4H10a2 2 0 0 0-2 2v36a2 2 0 0 0 2 2M30 4l10 10"}),e("circle",{cx:"18",cy:"17",r:"4"}),e("path",{d:"M15 28v9h18V21l-9.51 10.5z"})])],-1),Mt={class:"text-gray-900 dark:text-white"},Nt={class:"flex-row pt-2"},Ut={class:"text-sky-600"},Rt={class:"text-sky-600"},Ht={class:"text-sky-600"},Gt={key:1,class:"pt-5"},Tt={class:"pb-5"},Et={class:"relative inline-flex items-center w-full py-2 text-sm font-medium"},Ft=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mr-1",width:"20",height:"20",viewBox:"0 0 48 48"},[e("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"4"},[e("path",{d:"M10 44h28a2 2 0 0 0 2-2V14H30V4H10a2 2 0 0 0-2 2v36a2 2 0 0 0 2 2M30 4l10 10"}),e("circle",{cx:"18",cy:"17",r:"4"}),e("path",{d:"M15 28v9h18V21l-9.51 10.5z"})])],-1),Ot={class:"text-gray-900 dark:text-white"},zt={class:"flex-row pt-2"},Qt={class:"text-sky-600"},Zt={class:"text-sky-600"},At={class:"text-sky-600"},Jt={key:2,class:"pt-5"},Kt={class:"text-sky-600"},Wt={class:"text-sky-600"},Xt={class:"text-sky-600"},Yt={class:"footer pt-2 fixed right-0 left-0 bottom-0"},te={class:"flex justify-center"},ee={class:"mr-2"},le={class:"footer pt-2 fixed right-0 left-0 bottom-0"},oe={class:"flex justify-center"},se={class:"mr-2"},ae={class:"overscroll-none overflow-auto",style:{height:"calc(100vh - 125px)"}},ne={class:"pl-6 pr-6"},ie={class:"flex flex-wrap md:-m-2 content-center justify-center mb-5"},re={key:0,class:"w-full h-48"},ce=e("div",{class:"space-y-8 animate-pulse md:space-y-0 md:space-x-8 rtl:space-x-reverse md:flex md:items-center"},[e("div",{class:"flex items-center justify-center w-full h-44 bg-gray-300 sm:w-96 dark:bg-gray-700 rounded"},[e("svg",{class:"w-10 h-10 text-gray-200 dark:text-gray-600","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 18"},[e("path",{d:"M18 0H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Zm-5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm4.376 10.481A1 1 0 0 1 16 15H4a1 1 0 0 1-.895-1.447l3.5-7A1 1 0 0 1 7.468 6a.965.965 0 0 1 .9.5l2.775 4.757 1.546-1.887a1 1 0 0 1 1.618.1l2.541 4a1 1 0 0 1 .028 1.011Z"})])])],-1),ue=[ce],de={key:1,class:"relative w-full h-48 p-1 md:p-2"},pe=["src"],ve={key:2,xmlns:"http://www.w3.org/2000/svg",width:"256",height:"256",viewBox:"0 0 48 48"},_e=e("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"4"},[e("path",{d:"M39 6H9a3 3 0 0 0-3 3v30a3 3 0 0 0 3 3h30a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3"}),e("path",{d:"M18 23a5 5 0 1 0 0-10a5 5 0 0 0 0 10m24 13L31 26l-10 9l-7-6l-8 6"})],-1),ge=[_e],he=Q({__name:"view",props:{modelValue:{default:null}},emits:["update:modelValue"],setup(G,{emit:x}){const k=ut(),C=lt(),N=new ht,U=G,m=_({text:"",groups:[],flag:1,page:1,rowsPerPage:15});F(()=>U.modelValue,g=>{m.value.text=g,f.value=[],H()},{deep:!0});const f=_([]),c=_(!1),v=_(!1),V=_(!1),D=_(!1),h=_(!1),R=_(!1),j=_(!1),l=_(null),y=_(null),B=_([]),$=_([]);F(()=>l.value,g=>{l.value&&l.value.types&&l.value.types.length&&T(l.value.types[0].options,0),l.value.groups&&l.value.groups.length&&(B.value=C.all.filter(n=>l.value.groups.includes(n._id)).sort((n,q)=>n.level-q.level)),l.value.images?(R.value=!0,N.GetFilesById({ids:l.value.images.map(n=>n.id)}).then(n=>{$.value=n.map(q=>q.thumbnailLink)}).finally(()=>R.value=!1)):$.value=[]},{deep:!0});const H=async()=>{if(m.value.text)v.value=!1,c.value=!0,m.value.page=1;else{v.value=!0,c.value=!1,m.value.page=1,f.value=[];return}await gt(600),h.value&&(m.value.page=1,f.value=[],h.value=!1);const{data:g,rowsNumber:n}=await k.getItems(m.value);f.value=f.value.concat(g),m.value.page++,c.value=!1,(f.value.length>=n||!g.length)&&(v.value=!0)},A=async()=>{v.value=!1,c.value=!0,await H()},J=g=>{l.value=g,V.value=!0},K=g=>{l.value=g,D.value=!0},T=(g,n)=>{g&&g.length&&n>-1&&(y.value=g[n])};return(g,n)=>{const q=mt,W=vt,p=nt,X=_t,Y=it,tt=pt,L=rt,E=Z,et=ot;return u(),d(b,null,[e("div",yt,[s(tt,{modelValue:t(h),"onUpdate:modelValue":n[1]||(n[1]=o=>S(h)?h.value=o:null),"pulling-text":t(a)("global.textPulling"),"loosing-text":t(a)("global.textLoosing"),"loading-text":t(a)("global.textLoading"),onRefresh:A},{default:i(()=>[s(Y,{loading:t(c),"onUpdate:loading":n[0]||(n[0]=o=>S(c)?c.value=o:null),finished:t(v),"finished-text":"","loading-text":t(a)("global.textLoading"),offset:50,onLoad:H},{default:i(()=>[(u(!0),d(b,null,I(t(f),o=>(u(),st(X,{key:o._id},{left:i(()=>[s(q,{square:"",icon:"passed",type:"primary"})]),right:i(()=>[s(q,{square:"",icon:"comment-o",type:"success",onClick:w=>K(o),class:"h-full"},null,8,["onClick"]),Ct]),default:i(()=>[s(p,{title:o.title,label:o.fullName,onClick:w=>J(o)},{title:i(()=>[e("span",wt,r(o.title),1)]),label:i(()=>[s(W,{type:"primary"},{default:i(()=>[M(r(o.code),1)]),_:2},1024)]),value:i(()=>[e("div",bt,[e("div",null,[(u(!0),d(b,null,I(t(k).getValueType(o,"price",null,!0),(w,P)=>(u(),d("span",null,[e("b",xt,r(w),1),M(r(P<1?" - ":""),1)]))),256))]),e("div",null,[(u(!0),d(b,null,I(t(k).getValueType(o,"quantity",null,!0),(w,P)=>(u(),d("span",null,[e("b",kt,r(w),1),M(r(P<1?" - ":""),1)]))),256))])])]),_:2},1032,["title","label","onClick"])]),_:2},1024))),128))]),_:1},8,["loading","finished","loading-text"])]),_:1},8,["modelValue","pulling-text","loosing-text","loading-text"])]),s(E,{show:t(V),"onUpdate:show":n[3]||(n[3]=o=>S(V)?V.value=o:null),title:t(a)("tabs.salesInf"),class:"full-screen footer","show-cancel-button":!1,"show-confirm-button":!1,"close-on-click-action":"","close-on-click-overlay":""},{title:i(()=>[e("div",null,r(t(a)("global.details"))+": "+r(t(l).title||""),1)]),footer:i(()=>[e("div",Yt,[e("div",te,[e("button",{type:"button",onClick:n[2]||(n[2]=o=>V.value=!1),class:"w-full items-center text-center content-center px-3 py-3 text-xs font-medium text-white bg-sky-500 dark:bg-sky-600"},[e("span",ee,r(t(a)("global.back")),1)])])])]),default:i(()=>[t(l).types&&t(l).types.length>1?(u(),d("div",Vt,[t(l).types[0]&&t(l).types[0].options.length?(u(),d("div",Dt,[(u(!0),d(b,null,I(t(l).types[0].options,(o,w)=>(u(),d("button",{type:"button",onClick:P=>T(t(l).types[0].options,w),class:at(["px-2 py-1 text-xs font-medium text-gray-900 bg-white border dark:bg-gray-800  dark:text-white",t(y).id&&o.id==t(y).id?"border-blue-500":" border-gray-500 dark:border-gray-800"])},r(o.label),11,St))),256))])):O("",!0)])):O("",!0),$t,e("div",qt,[e("div",It,[t(l).types&&t(l).types.length==1?(u(),d("div",jt,[(u(!0),d(b,null,I(t(l).types[0].options,(o,w)=>(u(),d("div",Bt,[e("div",Lt,[Pt,e("span",Mt,r(o.label),1)]),e("div",Nt,[s(L,null,{default:i(()=>[s(p,{title:t(a)("product.priceImport")},{value:i(()=>[e("span",Ut,r(t(l).typeData[o.id].priceImport?t(l).typeData[o.id].priceImport.format():0),1)]),_:2},1032,["title"]),s(p,{title:t(a)("product.priceSale")},{value:i(()=>[e("span",Rt,r(t(l).typeData[o.id].price?t(l).typeData[o.id].price.format():0),1)]),_:2},1032,["title"]),s(p,{title:t(a)("product.quantity")},{value:i(()=>[e("span",Ht,r(t(l).typeData[o.id].quantity?t(l).typeData[o.id].quantity.format():0),1)]),_:2},1032,["title"])]),_:2},1024)])]))),256))])):t(l).types&&t(l).types.length>1?(u(),d("div",Gt,[(u(!0),d(b,null,I(t(l).types[1].options,(o,w)=>(u(),d("div",Tt,[e("div",Et,[Ft,e("span",Ot,r(o.label),1)]),e("div",zt,[s(L,null,{default:i(()=>[s(p,{title:t(a)("product.priceImport")},{value:i(()=>[e("span",Qt,r(t(l).typeData[t(y).id][o.id].priceImport?t(l).typeData[t(y).id][o.id].priceImport.format():0),1)]),_:2},1032,["title"]),s(p,{title:t(a)("product.priceSale")},{value:i(()=>[e("span",Zt,r(t(l).typeData[t(y).id][o.id].price?t(l).typeData[t(y).id][o.id].price.format():0),1)]),_:2},1032,["title"]),s(p,{title:t(a)("product.quantity")},{value:i(()=>[e("span",At,r(t(l).typeData[t(y).id][o.id].quantity?t(l).typeData[t(y).id][o.id].quantity.format():0),1)]),_:2},1032,["title"])]),_:2},1024)])]))),256))])):(u(),d("div",Jt,[s(L,null,{default:i(()=>[s(p,{title:t(a)("product.priceImport")},{value:i(()=>[e("span",Kt,r(t(l).priceImport?t(l).priceImport.format():0),1)]),_:1},8,["title"]),s(p,{title:t(a)("product.priceSale")},{value:i(()=>[e("span",Wt,r(t(l).price?t(l).price.format():0),1)]),_:1},8,["title"]),s(p,{title:t(a)("product.quantity")},{value:i(()=>[e("span",Xt,r(t(l).quantity?t(l).quantity.format():0),1)]),_:1},8,["title"])]),_:1})]))])])]),_:1},8,["show","title"]),s(E,{show:t(D),"onUpdate:show":n[6]||(n[6]=o=>S(D)?D.value=o:null),title:t(a)("global.details"),class:"full-screen footer","show-cancel-button":!1,"show-confirm-button":!1,"close-on-click-action":"","close-on-click-overlay":""},{title:i(()=>[e("div",null,r(t(a)("global.details"))+": "+r(t(l).title||""),1)]),footer:i(()=>[e("div",le,[e("div",oe,[e("button",{type:"button",onClick:n[4]||(n[4]=o=>D.value=!1),class:"w-full items-center text-center content-center px-3 py-3 text-xs font-medium text-white bg-sky-500 dark:bg-sky-600"},[e("span",se,r(t(a)("global.back")),1)])])]),e("div",ae,[e("div",ne,[e("div",ie,[t(R)?(u(),d("div",re,ue)):t($)&&t($).length?(u(),d("div",de,[e("img",{class:"block h-full w-full object-cover object-center border-2 border-solid",src:t($)[0],alt:"image description",onerror:"this.src='/src/assets/svg/image.svg'",onClick:n[5]||(n[5]=o=>j.value=!0)},null,8,pe)])):(u(),d("svg",ve,ge))]),s(L,null,{default:i(()=>[s(p,{title:t(l).title,label:t(l).code},null,8,["title","label"]),s(p,{title:t(a)("group.title")},{value:i(()=>[M(r(t(B)&&t(B).length?t(B).map(o=>o.title).join(", "):t(a)("global.updating")),1)]),_:1},8,["title"]),s(p,{title:t(a)("global.unit"),value:t(l).unit},null,8,["title","value"]),s(p,{title:t(a)("product.weight"),value:t(l).weight||t(a)("global.updating")},null,8,["title","value"]),s(p,{title:t(a)("product.brand"),value:t(l).brand||t(a)("global.updating")},null,8,["title","value"]),s(p,{title:t(a)("product.originName"),value:t(l).originName||t(a)("global.updating")},null,8,["title","value"]),s(p,{title:t(a)("product.date"),value:t(l).date||t(a)("global.updating")},null,8,["title","value"]),s(p,{title:t(a)("global.desc"),label:t(l).desc||t(a)("global.updating")},null,8,["title","label"])]),_:1})])])]),_:1},8,["show","title"]),s(et,{show:t(j),"onUpdate:show":n[7]||(n[7]=o=>S(j)?j.value=o:null),images:t($)},null,8,["show","images"])],64)}}}),$e=Q({__name:"index",setup(G){const x=_(!1),k=_(null),C=_({text:"",code:"",flag:1}),N=async c=>{c.code&&(c.code=JSON.parse(c.code),c.code&&c.code.length&&(C.value.text=c.code[0],x.value=!1))},U=async c=>{ft({type:"danger",message:`[${c.name}] - ${c.value}`})},m=z.debounce(c=>{C.value.text=c},600),f=z.debounce(c=>{C.value.text=""},200);return(c,v)=>{const V=ct,D=Z;return u(),d(b,null,[s(V,{modelValue:t(k),"onUpdate:modelValue":[v[0]||(v[0]=h=>S(k)?k.value=h:null),t(m)],"right-icon":"qr",placeholder:c.$t("global.inputPlaceholder"),onClickRightIcon:v[1]||(v[1]=h=>x.value=!0),onClear:t(f)},null,8,["modelValue","placeholder","onUpdate:modelValue","onClear"]),s(he,{modelValue:t(C).text,"onUpdate:modelValue":v[2]||(v[2]=h=>t(C).text=h)},null,8,["modelValue"]),s(D,{show:t(x),"onUpdate:show":v[4]||(v[4]=h=>S(x)?x.value=h:null),title:c.$t("qrCode.qrCodeScanner"),class:"full-screen","show-cancel-button":!1,"show-confirm-button":!1,"close-on-click-action":""},{default:i(()=>[s(dt,{"lbl-cancel":c.$t("global.back"),onOnCancel:v[3]||(v[3]=h=>x.value=!1),onOnDetect:N,onOnError:U},null,8,["lbl-cancel"])]),_:1},8,["show","title"])],64)}}});export{$e as default};
