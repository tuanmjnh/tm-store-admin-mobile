import{d as ae,r,$ as a,G as ne,z as se,c as w,b as o,w as n,e,i as g,F,P as ie,o as c,f as T,g as L,a as b,t as h,s as $,q as R,C as ue,L as re,T as ce,j as de}from"./index-CdWp1Bke.js";import{A as pe}from"./index-CN4o6Y_W.js";import{D as fe,a as me}from"./index-k5VEC7u2.js";import"./index-DpTwKlnw.js";import{S as ge}from"./index-MNi-81oi.js";import{P as ve,T as _e,S as we}from"./index-DVJ0m97g.js";import{_ as be}from"./tabBarView.vue_vue_type_script_setup_true_lang-gdjfs5wv.js";import{_ as he}from"./MdEditor-BD9Qdvc_.js";import{_ as xe}from"./add.vue_vue_type_style_index_0_lang-Bb2RnTMh.js";import{d as ye}from"./index-DbHcLYuo.js";import{l as Ce}from"./lodash-9XeukUMN.js";import{u as ke}from"./vueQrcodeReader.vue_vue_type_script_setup_true_lang-4KQHq9B4.js";import{D as Se}from"./index-BPrd6SHs.js";import{B as Ve}from"./index-mwYAXttw.js";import"./index.vue_vue_type_style_index_0_lang-DbJ6YQ6L.js";import"./index-BEQ1__mJ.js";import"./function-call-gnPaGpGq.js";import"./index-Cs_gHNCl.js";import"./image-BoVPK3so.js";import"./tmViewBox.vue_vue_type_script_setup_true_lang-CdlzRL9r.js";import"./index-B10X1U2S.js";import"./drive-gapi-CVXAYCZ6.js";import"./index-B7laanD8.js";const Fe={class:"mr-2 block overflow-hidden truncate w-52"},$e={class:"grid grid-flow-row"},De={class:"text-sky-600"},Ue={class:"text-green-700"},tt=ae({__name:"list",setup(Ie){const i=ke(),u=r({text:"",groups:[],flag:1,page:1,rowsPerPage:15,concat:!0}),A=[{text:a("global.activite"),value:1},{text:a("global.inactivite"),value:0}],k=ne(()=>i.items),v=r([]),x=r(!1),D=r(!1),d=r(!1),p=r(!1),S=r(!1),V=r(!1),_=r(!1),f=r(!1);se(()=>{});const y=async()=>{await ye(600),d.value&&(u.value.page=1,i.setItems(),d.value=!1);const{data:s,rowsNumber:l}=await i.getItems(u.value);i.setItems(k.value.concat(s)),u.value.page++,x.value=!1,(k.value.length>=l||!s.length)&&(D.value=!0)},G=async()=>{D.value=!1,x.value=!0,await y()},E=async()=>{d.value=!0,p.value=!1,await y()},M=Ce.debounce(async s=>{d.value=!0,p.value=!1,await y()},600),O=async()=>{d.value=!0,p.value=!1,_.value=!1,await y()},j=async()=>{await i.setItem(),f.value=!0},z=async s=>{await i.setItem(s),f.value=!0},P=async s=>{v.value=[R(s)],S.value=!0},H=async()=>{const s=await i.updateFlag(v.value.map(l=>({_id:l._id,flag:!u.value.flag})));s.status&&i.removeItems(s.success,k.value)},J=async s=>{v.value=[R(s)],V.value=!0},K=async()=>{if(v.value&&v.value.length){const s=await i.duplicate(v.value[0]);await i.setItem(s.data),f.value=!0}};return(s,l)=>{const C=Ve,Q=_e,U=ue,W=we,X=re,Y=ve,q=ce,Z=ge,ee=fe,te=me,le=de,oe=ie,B=pe,N=Se;return c(),w(F,null,[o(Y,{modelValue:e(d),"onUpdate:modelValue":l[1]||(l[1]=t=>g(d)?d.value=t:null),"pulling-text":e(a)("global.textPulling"),"loosing-text":e(a)("global.textLoosing"),"loading-text":e(a)("global.textLoading"),onRefresh:G},{default:n(()=>[o(X,{loading:e(x),"onUpdate:loading":l[0]||(l[0]=t=>g(x)?x.value=t:null),finished:e(D),"finished-text":e(a)("global.textFinished"),"loading-text":e(a)("global.textLoading"),offset:50,onLoad:y},{default:n(()=>[(c(!0),w(F,null,T(e(k),t=>(c(),L(W,{key:t._id},{left:n(()=>[o(C,{square:"",icon:"passed",type:"primary"})]),right:n(()=>[o(C,{square:"",icon:"edit",type:"success",onClick:m=>z(t),class:"h-full"},null,8,["onClick"]),e(u).flag?(c(),L(C,{key:0,square:"",icon:"close",type:"danger",onClick:m=>P(t)},null,8,["onClick"])):(c(),L(C,{key:1,square:"",icon:"replay",type:"warning",onClick:m=>P(t)},null,8,["onClick"])),o(C,{square:"",icon:"description-o",color:"#7232dd",onClick:m=>J(t),class:"h-full"},null,8,["onClick"])]),default:n(()=>[o(U,{title:t.title},{title:n(()=>[b("span",Fe,h(t.title),1)]),label:n(()=>[o(Q,{type:"primary"},{default:n(()=>[$(h(t.code),1)]),_:2},1024)]),value:n(()=>[b("div",$e,[b("div",null,[(c(!0),w(F,null,T(e(i).getValueType(t,"price",null,!0),(m,I)=>(c(),w("span",null,[b("b",De,h(m),1),$(h(I<1?" - ":""),1)]))),256))]),b("div",null,[(c(!0),w(F,null,T(e(i).getValueType(t,"quantity",null,!0),(m,I)=>(c(),w("span",null,[b("b",Ue,h(m),1),$(h(I<1?" - ":""),1)]))),256))])])]),_:2},1032,["title"])]),_:2},1024))),128))]),_:1},8,["loading","finished","finished-text","loading-text"])]),_:1},8,["modelValue","pulling-text","loosing-text","loading-text"]),o(be,null,{item:n(()=>[o(q,{icon:"add-o",onClick:j}),o(q,{icon:"filter-o",onClick:l[2]||(l[2]=t=>p.value=!e(p))})]),_:1}),o(oe,{show:e(p),"onUpdate:show":l[6]||(l[6]=t=>g(p)?p.value=t:null),position:"bottom",style:{height:"30%"}},{default:n(()=>[o(Z,{modelValue:e(u).text,"onUpdate:modelValue":[l[3]||(l[3]=t=>e(u).text=t),e(M)],placeholder:e(a)("global.search")},null,8,["modelValue","placeholder","onUpdate:modelValue"]),o(U,{title:"Cell title","is-link":"",onClick:l[4]||(l[4]=t=>_.value=!0)},{title:n(()=>[$("NhÃ³m")]),_:1}),o(le,null,{default:n(()=>[o(U,{title:e(a)("global.status")},{value:n(()=>[o(te,null,{default:n(()=>[o(ee,{modelValue:e(u).flag,"onUpdate:modelValue":l[5]||(l[5]=t=>e(u).flag=t),options:A,onChange:E},null,8,["modelValue"])]),_:1})]),_:1},8,["title"])]),_:1})]),_:1},8,["show"]),o(B,{show:e(S),"onUpdate:show":l[7]||(l[7]=t=>g(S)?S.value=t:null),"cancel-text":e(a)("global.cancel"),"close-on-click-action":"",actions:[{name:e(u).flag?e(a)("global.delete"):e(a)("global.recover"),color:e(u).flag?"#f56c6c":"#e6a23c"}],onSelect:H},null,8,["show","cancel-text","actions"]),o(B,{show:e(V),"onUpdate:show":l[8]||(l[8]=t=>g(V)?V.value=t:null),"cancel-text":e(a)("global.cancel"),"close-on-click-action":"",actions:[{name:e(a)("global.duplicate"),color:"#7232dd"}],onSelect:K},null,8,["show","cancel-text","actions"]),o(N,{show:e(_),"onUpdate:show":l[11]||(l[11]=t=>g(_)?_.value=t:null),class:"full-screen footer",title:e(a)("group.titleproduct"),"show-cancel-button":!1,"show-confirm-button":!1},{default:n(()=>[o(he,{flag:1,text:"",type:"product",root:!1,selectionMode:"independent",selected:e(u).groups,"onUpdate:selected":l[9]||(l[9]=t=>e(u).groups=t),"lbl-submit":e(a)("global.confirm"),"lbl-cancel":e(a)("global.back"),"is-bot":"",onOnSubmit:O,onOnCancel:l[10]||(l[10]=t=>_.value=!1)},null,8,["selected","lbl-submit","lbl-cancel"])]),_:1},8,["show","title"]),o(N,{show:e(f),"onUpdate:show":l[13]||(l[13]=t=>g(f)?f.value=t:null),class:"full-screen footer",title:e(i).item._id?e(a)("global.update"):e(a)("global.add"),"show-cancel-button":!1,"show-confirm-button":!1},{default:n(()=>[o(xe,{"is-dialog":"",onOnClose:l[12]||(l[12]=t=>f.value=!1)})]),_:1},8,["show","title"])],64)}}});export{tt as default};
