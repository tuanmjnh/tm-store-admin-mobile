import{d as H,bp as Z,bL as w,G as h,bM as W,o as c,c as u,a as p,e as r,bN as X,E as v,F as L,t as F,v as K,g as O,bO as Y,aL as R,f as D,w as G,I as ee,bP as ne,bQ as oe,_ as te,az as le,bl as A,y as Q,z as ie,A as de,bR as se}from"./index-CdWp1Bke.js";const z=(l,d,t)=>{if(l.children)for(const e of l.children)t(e[d]),e.children&&z(e,d,t)},P=(l,d,t)=>{if(l.children)for(const e of l.children)t=[...t,e[d]],e.children&&(t=[...t,...P(e,d,t)]);return[...t,l[d]]},T=(l,d,t,e)=>{if(d.children)for(const s of d.children)s.children?e=e&&l.has(s[t])&&T(l,s,t,e):e=e&&l.has(s[t]);return e},U=(l,d,t,e)=>{if(d.children)for(const s of d.children)s.children?e=e||l.has(s[t])||U(l,s,t,e):e=e||l.has(s[t]);return e},$=(l,d,t,e)=>e==="all"?T(l,d,t,!0):U(l,d,t,!1),j=l=>(ne("data-v-3816553d"),l=l(),oe(),l),ae={class:"flex items-center rounded-md py-1 px-2 gap-2 bg-transparent text-surface-600 dark:text-white/70 transition-shadow duration-200"},ce=j(()=>p("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M4.38708 13C4.28408 13.0005 4.18203 12.9804 4.08691 12.9409C3.99178 12.9014 3.9055 12.8433 3.83313 12.7701C3.68634 12.6231 3.60388 12.4238 3.60388 12.2161C3.60388 12.0084 3.68634 11.8091 3.83313 11.6622L8.50507 6.99022L3.83313 2.31827C3.69467 2.16968 3.61928 1.97313 3.62287 1.77005C3.62645 1.56698 3.70872 1.37322 3.85234 1.22959C3.99596 1.08597 4.18972 1.00371 4.3928 1.00012C4.59588 0.996539 4.79242 1.07192 4.94102 1.21039L10.1669 6.43628C10.3137 6.58325 10.3962 6.78249 10.3962 6.99022C10.3962 7.19795 10.3137 7.39718 10.1669 7.54416L4.94102 12.7701C4.86865 12.8433 4.78237 12.9014 4.68724 12.9409C4.59212 12.9804 4.49007 13.0005 4.38708 13Z",fill:"currentColor"})],-1)),re=[ce],ue={key:1,class:"w-7 h-7"},pe=["disabled","checked"],fe=["disabled","indeterminate","checked"],he=j(()=>p("path",{d:"M4.86199 11.5948C4.78717 11.5923 4.71366 11.5745 4.64596 11.5426C4.57826 11.5107 4.51779 11.4652 4.46827 11.4091L0.753985 7.69483C0.683167 7.64891 0.623706 7.58751 0.580092 7.51525C0.536478 7.44299 0.509851 7.36177 0.502221 7.27771C0.49459 7.19366 0.506156 7.10897 0.536046 7.03004C0.565935 6.95111 0.613367 6.88 0.674759 6.82208C0.736151 6.76416 0.8099 6.72095 0.890436 6.69571C0.970973 6.67046 1.05619 6.66385 1.13966 6.67635C1.22313 6.68886 1.30266 6.72017 1.37226 6.76792C1.44186 6.81567 1.4997 6.8786 1.54141 6.95197L4.86199 10.2503L12.6397 2.49483C12.7444 2.42694 12.8689 2.39617 12.9932 2.40745C13.1174 2.41873 13.2343 2.47141 13.3251 2.55705C13.4159 2.64268 13.4753 2.75632 13.4938 2.87973C13.5123 3.00315 13.4888 3.1292 13.4271 3.23768L5.2557 11.4091C5.20618 11.4652 5.14571 11.5107 5.07801 11.5426C5.01031 11.5745 4.9368 11.5923 4.86199 11.5948Z",fill:"currentColor"},null,-1)),me=[he],be=j(()=>p("path",{d:"M13.2222 7.77778H0.777778C0.571498 7.77778 0.373667 7.69584 0.227806 7.54998C0.0819442 7.40412 0 7.20629 0 7.00001C0 6.79373 0.0819442 6.5959 0.227806 6.45003C0.373667 6.30417 0.571498 6.22223 0.777778 6.22223H13.2222C13.4285 6.22223 13.6263 6.30417 13.7722 6.45003C13.9181 6.5959 14 6.79373 14 7.00001C14 7.20629 13.9181 7.40412 13.7722 7.54998C13.6263 7.69584 13.4285 7.77778 13.2222 7.77778Z",fill:"currentColor"},null,-1)),ye=[be],Ce={key:0,class:"m-0 list-none p-0 pl-4 [&:not(ul)]:pl-0 [&:not(ul)]:my-[2px]"},ke=H({__name:"treeNode",props:{level:{},item:{},selectable:{type:Boolean},selectionMode:{default:"leaf"},radio:{type:Boolean},disabled:{type:Boolean},unopenable:{type:Boolean},openQuick:{type:Boolean},color:{},identifier:{},idKey:{default:"id"},nameKey:{default:"name"}},emits:["change"],setup(l,{emit:d}){const t=d,e=Z("selected-nodes"),s=Z("opened-nodes"),n=l,{emit:x}=w(`open-node-${n.identifier}`),{emit:S}=w(`select-node-${n.identifier}`),{emit:I}=w(`click-node-${n.identifier}`),B=h(()=>({"treeview-node--leaf":!f.value})),b=h(()=>s==null?void 0:s.has(n.item[n.idKey])),m=h(()=>e==null?void 0:e.has(n.item[n.idKey])),f=h(()=>!!n.item.children&&!!n.item.children.length),_=h(()=>$(e,n.item,n.idKey,"all")),g=h(()=>$(e,n.item,n.idKey,"atLeastOne")),y=h(()=>f.value&&n.selectionMode=="leaf"?_.value?!0:(g.value,!1):m.value),N=h(()=>{if(f.value&&n.selectionMode=="leaf"){if(_.value)return!1;if(g.value)return!0}return!1}),i=()=>{const a=n.item[n.idKey];f.value&&n.selectionMode=="leaf"&&(_.value?m.value||C():g.value?m.value||e.add(a):m.value&&C(),t("change"))},C=()=>{S(n.item),t("change")},M=()=>{f.value&&!n.unopenable&&n.openQuick&&x(n.item[n.idKey]),I(n.item),S(n.item),t("change")},o=()=>{f.value&&!n.unopenable&&x(n.item[n.idKey])};return(a,k)=>{const V=ee,q=W("tree-node",!0);return c(),u("li",{class:v([r(B),"p-0 my-[2px] mx-0 first:mt-0 rounded-md"])},[p("div",ae,[r(f)?(c(),u("button",{key:0,type:"button",tabindex:"-1",onClick:X(o,["stop"]),class:v(["inline-flex items-center justify-center border-0 rounded-full w-7 h-7 bg-transparent text-surface-600 dark:text-white/70 transition duration-200 cursor-pointer select-none",{open:r(b),close:!r(b)}])},re,2)):(c(),u("div",ue)),n.selectable?(c(),u(L,{key:2},[n.radio?(c(),u("div",{key:0,class:"radio-group",onClick:C},[p("input",{disabled:n.disabled,class:"radio",type:"radio",checked:r(y)},null,8,pe),p("span",null,F(a.item[n.nameKey]),1)])):(c(),u("div",{key:1,class:"relative inline-flex align-bottom w-5 h-5 cursor-pointer select-none",onClick:C},[p("input",{type:"checkbox",disabled:n.disabled,indeterminate:r(N),checked:r(y),class:"peer w-full h-full absolute top-0 left-0 z-10 p-0 m-0 opacity-0 rounded outline-none border border-surface-300 dark:border-surface-700 appearance-none cursor-pointer",tabindex:"-1"},null,8,fe),p("div",{class:v(["flex items-center justify-center w-5 h-5 rounded border transition-colors duration-200",r(y)||r(N)?"checked":"border-surface-300 dark:border-surface-700 bg-surface-0 dark:bg-surface-950",n.disabled?"border-disable":""])},[r(y)?(c(),u("svg",{key:0,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:v(["w-[0.875rem] h-[0.875rem]  transition-all duration-200",n.disabled?"":"text-white dark:text-surface-950"])},me,2)):K("",!0),r(N)?(c(),u("svg",{key:1,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:v(["w-[0.875rem] h-[0.875rem] transition-all duration-200",n.disabled?"":"text-white dark:text-surface-950"])},ye,2)):K("",!0)],2)]))],64)):K("",!0),a.item.icon?(c(),u(L,{key:3},[a.item.icon.match(/icon-park/g)?(c(),O(r(Y),{key:0,icon:a.item.icon,class:"van-badge__wrapper van-icon"},null,8,["icon"])):(c(),O(V,{key:1,name:a.item.icon},null,8,["name"]))],64)):K("",!0),p("span",{class:"text-surface-600 dark:text-white/70",onClick:M},F(a.item[n.nameKey]),1),R(a.$slots,"append",{item:a.item},void 0,!0)]),r(b)?(c(),u("ul",Ce,[(c(!0),u(L,null,D(n.item.children,E=>(c(),O(q,{selectable:n.selectable,level:n.level+1,key:E[n.idKey],item:E,"id-key":n.idKey,"name-key":n.nameKey,color:n.color,disabled:n.disabled,unopenable:n.unopenable,identifier:n.identifier,radio:n.radio,selectionMode:n.selectionMode,onChange:i},{append:G(J=>[R(a.$slots,"append",{item:J.item},void 0,!0)]),_:2},1032,["selectable","level","item","id-key","name-key","color","disabled","unopenable","identifier","radio","selectionMode"]))),128))])):K("",!0)],2)}}}),ve=te(ke,[["__scopeId","data-v-3816553d"]]),_e=H({__name:"index",props:{dense:{type:Boolean},disabled:{type:Boolean},radio:{type:Boolean,default:!1},openAll:{type:Boolean},openQuick:{type:Boolean},selectable:{type:Boolean,default:!1},unopenable:{type:Boolean},color:{default:"#7e7ec2"},modelValue:{},items:{},selectionMode:{default:"leaf"},idKey:{default:"id"},nameKey:{default:"name"}},emits:["update:modelValue","onClick"],setup(l,{emit:d}){const t=d,e=l,s=se(1,9999),n=w(`open-node-${s}`),x=w(`select-node-${s}`),S=w(`click-node-${s}`),I=o=>{if(i.openedNodes.has(o)){i.openedNodes.delete(o);return}i.openedNodes.add(o)},B=o=>i.selectedNodes.delete(o),b=o=>{i.selectedNodes.add(o)},m=o=>{if(i.selectedNodes.has(o)){B(o);return}b(o)},f=o=>{e.selectionMode=="leaf"&&o.children&&o.children.length?i.selectedNodes.has(o[e.idKey])&&$(i.selectedNodes,o,e.idKey,"atLeastOne")&&!$(i.selectedNodes,o,e.idKey,"all")?z(o,e.idKey,b):(m(o[e.idKey]),z(o,e.idKey,i.selectedNodes.has(o[e.idKey])?b:B)):m(o[e.idKey])},_=o=>{i.clickNode=o,t("onClick",o)},g=n.on(I),y=x.on(f),N=S.on(_),i=le({selectedNodes:new Set,openedNodes:new Set,clickNode:new Set,stopRecursion:!1});A("selected-nodes",i.selectedNodes),A("opened-nodes",i.openedNodes),A("click-node",i.clickNode);const C=h(()=>({"treeview--dense":e.dense})),M=()=>{if(e.openAll===!0){let o=[];for(const a of e.items){let k=P(a,e.idKey,[]);o=[...o,...k]}for(const a of[...new Set(o)])i.openedNodes.add(a)}};return Q(()=>i.selectedNodes,o=>{t("update:modelValue",[...o]),i.stopRecursion=!0},{deep:!0}),Q(()=>e.modelValue,o=>{if(i.stopRecursion){i.stopRecursion=!1;return}if(o&&o.length){for(const a of[...new Set(o)])i.selectedNodes.add(a);return}i.selectedNodes.clear()},{immediate:!0}),Q(()=>e.items,o=>{M()},{deep:!0,immediate:!0}),ie(()=>{M()}),de(()=>{g(),y(),N()}),(o,a)=>(c(),u("ul",{class:v(["treeview",r(C)])},[(c(!0),u(L,null,D(e.items,k=>(c(),O(ve,{selectable:e.selectable,color:e.color,level:1,key:k[e.idKey],item:k,"id-key":e.idKey,"name-key":e.nameKey,disabled:k.disabled,unopenable:e.unopenable,radio:e.radio,identifier:r(s),openQuick:e.openQuick,selectionMode:e.selectionMode},{append:G(V=>[R(o.$slots,"append",{item:V.item})]),_:2},1032,["selectable","color","item","id-key","name-key","disabled","unopenable","radio","identifier","openQuick","selectionMode"]))),128))],2))}});export{_e as _};
