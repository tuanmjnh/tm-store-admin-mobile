import{d as J,r as u,$ as n,c as V,b as a,w as s,e,i as v,F as S,P as O,o as f,f as Q,g as x,a as W,t as L,s as X,K as $,q as Y,C as Z,L as ee,T as te,j as oe}from"./index-CCiqnY4g.js";import{A as ae}from"./index-B5j9-yk4.js";import{D as le,a as ne}from"./index-BMD1pfGu.js";import"./index-df1euzin.js";import{S as se}from"./index-CV8Z38v6.js";import{P as ie,T as ue,S as re}from"./index-LNpVP83O.js";import{_ as ce}from"./tabBarView.vue_vue_type_script_setup_true_lang-Dr-UnG8l.js";import{d as pe}from"./index-DbHcLYuo.js";import{u as de}from"./users-54UC9w9T.js";import{B as me}from"./index-KPzygAO1.js";const _e={class:"mr-2"},Ve=J({__name:"list",setup(fe){const m=de(),i=u({text:"",key:"group",enable:!0,page:1,rowsPerPage:15}),P=[{text:n("global.activite"),value:1},{text:n("global.inactivite"),value:0}],r=u([]),h=u([]),_=u(!1),b=u(!1),c=u(!1),p=u(!1),g=u(!1),w=async()=>{await pe(600),c.value&&(i.value.page=1,r.value=[],c.value=!1);const{data:l,rowsNumber:o}=await m.getItems(i.value);r.value=r.value.concat(l),i.value.page++,_.value=!1,(r.value.length>=o||!l.length)&&(b.value=!0)},R=async()=>{b.value=!1,_.value=!0,await w()},U=async()=>{c.value=!0,p.value=!1,await w()},B=async()=>{await m.setItem(),$.push("add")},I=async l=>{await m.setItem(l),$.push(`edit/${l._id}`)},y=async l=>{h.value=[Y(l)],g.value=!0},T=async()=>{const l=await m.updateFlag(h.value.map(o=>({_id:o._id,flag:!i.value.enable})));l.status&&m.removeItems(l.success,r.value)},q=l=>{const o=[];for(const d of l)o.push(d.name);return o.join(", ")};return(l,o)=>{const d=me,D=ue,k=Z,N=re,A=ee,j=ie,C=te,E=se,G=le,K=ne,M=oe,z=O,H=ae;return f(),V(S,null,[a(j,{modelValue:e(c),"onUpdate:modelValue":o[1]||(o[1]=t=>v(c)?c.value=t:null),"pulling-text":e(n)("global.textPulling"),"loosing-text":e(n)("global.textLoosing"),"loading-text":e(n)("global.textLoading"),onRefresh:R},{default:s(()=>[a(A,{loading:e(_),"onUpdate:loading":o[0]||(o[0]=t=>v(_)?_.value=t:null),finished:e(b),"finished-text":e(n)("global.textFinished"),"loading-text":e(n)("global.textLoading"),offset:50,onLoad:w},{default:s(()=>[(f(!0),V(S,null,Q(e(r),t=>(f(),x(N,{key:t._id},{left:s(()=>[a(d,{square:"",icon:"passed",type:"primary"})]),right:s(()=>[a(d,{square:"",icon:"edit",type:"success",onClick:F=>I(t)},null,8,["onClick"]),e(i).enable?(f(),x(d,{key:0,square:"",icon:"close",type:"danger",onClick:F=>y(t)},null,8,["onClick"])):(f(),x(d,{key:1,square:"",icon:"replay",type:"warning",onClick:F=>y(t)},null,8,["onClick"]))]),default:s(()=>[a(k,{title:t.username,value:q(t.userRoles),label:t.fullName},{title:s(()=>[W("span",_e,L(t.username),1),a(D,{type:"primary"},{default:s(()=>[X(L(t.group),1)]),_:2},1024)]),_:2},1032,["title","value","label"])]),_:2},1024))),128))]),_:1},8,["loading","finished","finished-text","loading-text"])]),_:1},8,["modelValue","pulling-text","loosing-text","loading-text"]),a(ce,null,{item:s(()=>[a(C,{icon:"add-o",onClick:B}),a(C,{icon:"filter-o",onClick:o[2]||(o[2]=t=>p.value=!e(p))})]),_:1}),a(z,{show:e(p),"onUpdate:show":o[5]||(o[5]=t=>v(p)?p.value=t:null),position:"bottom",style:{height:"30%"}},{default:s(()=>[a(E,{modelValue:e(i).text,"onUpdate:modelValue":o[3]||(o[3]=t=>e(i).text=t),placeholder:e(n)("global.search")},null,8,["modelValue","placeholder"]),a(M,null,{default:s(()=>[a(k,{title:e(n)("global.status")},{value:s(()=>[a(K,null,{default:s(()=>[a(G,{modelValue:e(i).enable,"onUpdate:modelValue":o[4]||(o[4]=t=>e(i).enable=t),options:P,onChange:U},null,8,["modelValue"])]),_:1})]),_:1},8,["title"])]),_:1})]),_:1},8,["show"]),a(H,{show:e(g),"onUpdate:show":o[6]||(o[6]=t=>v(g)?g.value=t:null),"cancel-text":e(n)("global.cancel"),"close-on-click-action":"",actions:[{name:e(i).enable?e(n)("global.delete"):e(n)("global.recover"),color:e(i).enable?"#f56c6c":"#e6a23c"}],onSelect:T},null,8,["show","cancel-text","actions"])],64)}}});export{Ve as default};
