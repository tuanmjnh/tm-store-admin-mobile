import{Q as W,d as A,r as k,a8 as G,ay as K,G as D,R as M,a0 as _,aB as Z,a2 as j,b as r,a6 as O,V as R,a5 as J,a7 as Q,aC as B,aE as U,a4 as X,az as Y,Z as q,aF as ee,X as te,am as T,aG as oe,aH as ae,aI as ne,P as se,ad as le,C as re,aJ as ie,I as ce,ag as N}from"./index-CdWp1Bke.js";import{u as de}from"./index-DpTwKlnw.js";const[H,y]=W("dropdown-menu"),ue={overlay:O,zIndex:R,duration:J(.2),direction:Q("down"),activeColor:String,autoLocate:Boolean,closeOnClickOutside:O,closeOnClickOverlay:O,swipeThreshold:R},L=Symbol(H);var pe=A({name:H,props:ue,setup(t,{slots:i}){const c=de(),p=k(),o=k(),d=k(0),{children:n,linkChildren:I}=G(L),f=K(p),v=D(()=>n.some(e=>e.state.showWrapper)),h=D(()=>t.swipeThreshold&&n.length>+t.swipeThreshold),x=D(()=>{if(v.value&&M(t.zIndex))return{zIndex:+t.zIndex+1}}),C=()=>{n.forEach(e=>{e.toggle(!1)})},S=()=>{t.closeOnClickOutside&&C()},g=()=>{if(o.value){const e=B(o);t.direction==="down"?d.value=e.bottom:d.value=U.value-e.top}},z=()=>{v.value&&g()},E=e=>{n.forEach((a,s)=>{s===e?a.toggle():a.state.showPopup&&a.toggle(!1,{immediate:!0})})},P=(e,a)=>{const{showPopup:s}=e.state,{disabled:l,titleClass:m}=e;return r("div",{id:`${c}-${a}`,role:"button",tabindex:l?void 0:0,class:[y("item",{disabled:l,grow:h.value}),{[X]:!l}],onClick:()=>{l||E(a)}},[r("span",{class:[y("title",{down:s===(t.direction==="down"),active:s}),m],style:{color:s?t.activeColor:""}},[r("div",{class:"van-ellipsis"},[e.renderTitle()])])])};return _({close:C}),I({id:c,props:t,offset:d,updateOffset:g}),Z(p,S),j("scroll",z,{target:f,passive:!0}),()=>{var e;return r("div",{ref:p,class:y()},[r("div",{ref:o,style:x.value,class:y("bar",{opened:v.value,scrollable:h.value})},[n.map(P)]),(e=i.default)==null?void 0:e.call(i)])}}});const[fe,b]=W("dropdown-item"),ve={title:String,options:te(),disabled:Boolean,teleport:[String,Object],lazyRender:O,modelValue:T,titleClass:T};var me=A({name:fe,inheritAttrs:!1,props:ve,emits:["open","opened","close","closed","change","update:modelValue"],setup(t,{emit:i,slots:c,attrs:p}){const o=Y({showPopup:!1,transition:!0,showWrapper:!1}),d=k(),{parent:n,index:I}=q(L);if(!n)return;const f=e=>()=>i(e),v=f("open"),h=f("close"),x=f("opened"),C=()=>{o.showWrapper=!1,i("closed")},S=e=>{t.teleport&&e.stopPropagation()},g=(e=!o.showPopup,a={})=>{e!==o.showPopup&&(o.showPopup=e,o.transition=!a.immediate,e&&(n.updateOffset(),o.showWrapper=!0))},z=()=>{if(c.title)return c.title();if(t.title)return t.title;const e=t.options.find(a=>a.value===t.modelValue);return e?e.text:""},E=e=>{const{activeColor:a}=n.props,{disabled:s}=e,l=e.value===t.modelValue,m=()=>{s||(o.showPopup=!1,e.value!==t.modelValue&&(i("update:modelValue",e.value),i("change",e.value)))},w=()=>{if(l)return r(ce,{class:b("icon"),color:s?void 0:a,name:"success"},null)};return r(re,{role:"menuitem",key:String(e.value),icon:e.icon,title:e.text,class:b("option",{active:l,disabled:s}),style:{color:l?a:""},tabindex:l?0:-1,clickable:!s,onClick:m},{value:w})},P=()=>{const{offset:e}=n,{autoLocate:a,zIndex:s,overlay:l,duration:m,direction:w,closeOnClickOverlay:F}=n.props,V=ie(s);let $=e.value;if(a&&d.value){const u=oe(d.value);u&&($-=B(u).top)}return w==="down"?V.top=`${$}px`:V.bottom=`${$}px`,ae(r("div",le({ref:d,style:V,class:b([w]),onClick:S},p),[r(se,{show:o.showPopup,"onUpdate:show":u=>o.showPopup=u,role:"menu",class:b("content"),overlay:l,position:w==="down"?"top":"bottom",duration:o.transition?m:0,lazyRender:t.lazyRender,overlayStyle:{position:"absolute"},"aria-labelledby":`${n.id}-${I.value}`,closeOnClickOverlay:F,onOpen:v,onClose:h,onOpened:x,onClosed:C},{default:()=>{var u;return[t.options.map(E),(u=c.default)==null?void 0:u.call(c)]}})]),[[ne,o.showWrapper]])};return _({state:o,toggle:g,renderTitle:z}),()=>t.teleport?r(ee,{to:t.teleport},{default:()=>[P()]}):P()}});const Ce=N(me),ge=N(pe);export{Ce as D,ge as a};
